---
title: pre-commit
description: Jalankan Ultracite secara otomatis pada file Git yang telah di-stage menggunakan pre-commit
---

Ultracite menyediakan integrasi mulus dengan [pre-commit](https://pre-commit.com/), sebuah framework berbasis Python yang populer untuk mengelola Git hooks. Integrasi ini secara otomatis menyiapkan hook pre-commit untuk memastikan kode Anda diformat dengan benar sebelum setiap commit.

## Apa itu pre-commit?

pre-commit adalah framework untuk mengelola dan memelihara pre-commit hooks multi-bahasa. Framework ini banyak digunakan di ekosistem Python tetapi mendukung hooks untuk bahasa apa pun. pre-commit menggunakan file `.pre-commit-config.yaml` untuk mendefinisikan hook mana yang dijalankan dan kapan.

## Bagaimana Ultracite Menggunakan pre-commit

Ketika Anda menginisialisasi Ultracite di proyek Anda, ia dapat secara otomatis mengonfigurasi pre-commit untuk menjalankan pemformatan kode sebelum setiap commit. Ini memastikan bahwa:

- Semua kode yang di-commit mengikuti standar format yang konsisten
- Pemeriksaan kualitas kode diberlakukan secara otomatis
- Anggota tim tidak perlu mengingat untuk memformat kode secara manual
- Repositori Anda mempertahankan gaya kode yang bersih dan konsisten

## Perilaku Hook pre-commit

Integrasi pre-commit Ultracite membuat hook lokal yang menjalankan perintah berikut:

```bash
npx ultracite fix
```

Perintah ini:
- Menjalankan linter dan formatter Biome pada basis kode Anda
- Secara otomatis memperbaiki masalah format apabila memungkinkan
- Memastikan semua file yang telah di-stage memenuhi standar kode proyek Anda
- Mencegah commit yang dapat memperkenalkan ketidakkonsistenan format

## Pengaturan Otomatis

Selama proses inisialisasi (`ultracite init`), jika Anda memilih opsi pre-commit, Ultracite:

1. **Membuat File Konfigurasi**: Mengatur file `.pre-commit-config.yaml` dengan hook Ultracite
2. **Menangani Pengaturan yang Ada**: Jika Anda sudah mengonfigurasi pre-commit, ia menambahkan hook Ultracite ke konfigurasi yang ada daripada menimpanya

## Konfigurasi yang Dihasilkan

Ultracite menghasilkan `.pre-commit-config.yaml` berikut:

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
```

### Penjelasan Konfigurasi

- **repo: local** - Menggunakan hook yang didefinisikan secara lokal daripada mengambil dari repositori jarak jauh
- **id: ultracite** - Pengidentifikasi unik untuk hook
- **name: ultracite** - Nama tampilan yang ditunjukkan ketika hook dijalankan
- **entry** - Perintah yang dieksekusi (menggunakan npx untuk menjalankan Ultracite)
- **language: system** - Menggunakan alat yang terpasang di sistem
- **types_or** - Tipe file yang memicu hook
- **pass_filenames: false** - Menjalankan sekali untuk semua file alih-alih per-file

## Prasyarat

Sebelum menggunakan integrasi pre-commit, Anda memerlukan:

1. **Python terpasang** - pre-commit adalah paket Python
2. **pre-commit terpasang** - Instal secara global atau di lingkungan virtual:
   ```bash
   pip install pre-commit
   # or
   pipx install pre-commit
   ```
3. **Inisialisasi hooks** - Setelah Ultracite membuat konfigurasi, jalankan:
   ```bash
   pre-commit install
   ```

## Manfaat

### Gaya Kode yang Konsisten
Setiap commit secara otomatis mengikuti standar format proyek Anda, menghilangkan perdebatan gaya dan ketidakkonsistenan.

### Kontrol Kualitas Otomatis
Tangkap masalah format sebelum masuk ke repositori Anda, menjaga riwayat commit yang bersih.

### Kolaborasi Tim
Semua anggota tim secara otomatis mengikuti standar format yang sama tanpa intervensi manual.

### Optimisasi CI/CD
Kurangi kegagalan pipeline CI/CD akibat masalah format, karena kode sudah diformat terlebih dahulu secara lokal.

### Dukungan Multi-Bahasa
Jika proyek Anda menggunakan beberapa bahasa, pre-commit dapat mengelola hooks untuk semuanya dalam satu file konfigurasi.

## Integrasi Alur Kerja

Dengan integrasi pre-commit diaktifkan, alur kerja Git tipikal Anda menjadi:

1. **Lakukan perubahan** pada file kode Anda
2. **Stage perubahan** dengan `git add`
3. **Commit perubahan** dengan `git commit`
4. **Hook pre-commit berjalan** secara otomatis, memformat file yang di-stage
5. **Commit dilanjutkan** dengan kode yang sudah diformat dengan benar

Jika formatter membuat perubahan, Anda harus men-stage dan meng-commit perubahan tersebut juga.

## Kustomisasi

Meskipun Ultracite menetapkan default yang masuk akal, Anda dapat menyesuaikan perilakunya:

- Tambahkan hook tambahan dari repositori [pre-commit hooks](https://pre-commit.com/hooks.html)
- Konfigurasikan pengaturan Biome untuk menyesuaikan aturan format
- Ubah filter `types_or` untuk menyertakan/mengecualikan tipe file
- Tambahkan pola `exclude` untuk melewati file tertentu

### Contoh Konfigurasi Diperluas

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
        exclude: ^(vendor/|dist/)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
```

## Pemecahan Masalah

### Hook Tidak Berjalan
Jika hook pre-commit tidak berjalan:
- Pastikan pre-commit terpasang: `pre-commit --version`
- Jalankan `pre-commit install` untuk menyiapkan Git hooks
- Periksa bahwa `.pre-commit-config.yaml` ada di root proyek Anda

### Node.js Tidak Ditemukan
Jika Anda mendapatkan error tentang npx yang tidak ditemukan:
- Pastikan Node.js ada di PATH Anda
- Pertimbangkan menggunakan file `.nvmrc` atau `.node-version` untuk manajemen versi

### Melewati Hooks
Dalam kasus langka di mana Anda perlu melewati hook pre-commit:
```bash
git commit --no-verify
# or
git commit -n
```

Gunakan ini dengan hemat, karena ini melewati pemformatan otomatis yang menjaga konsistensi basis kode Anda.

### Menjalankan Hooks Secara Manual
Untuk menjalankan hooks secara manual pada semua file:
```bash
pre-commit run --all-files
```

Untuk menjalankan hanya hook Ultracite:
```bash
pre-commit run ultracite --all-files
```