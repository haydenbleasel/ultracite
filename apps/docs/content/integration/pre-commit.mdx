---
title: pre-commit
description: Automatically run Ultracite on your staged Git files with pre-commit
---

Ultracite provides seamless integration with [pre-commit](https://pre-commit.com/), a popular Python-based framework for managing Git hooks. This integration automatically sets up pre-commit hooks to ensure your code is properly formatted before every commit.

## What is pre-commit?

pre-commit is a framework for managing and maintaining multi-language pre-commit hooks. It's widely used in the Python ecosystem but supports hooks for any language. pre-commit uses a `.pre-commit-config.yaml` file to define which hooks to run and when.

## How Ultracite Uses pre-commit

When you initialize Ultracite in your project, it can automatically configure pre-commit to run code formatting before each commit. This ensures that:

- All committed code follows consistent formatting standards
- Code quality checks are enforced automatically
- Team members don't need to remember to format code manually
- Your repository maintains clean, consistent code style

## Pre-commit Hook Behavior

Ultracite's pre-commit integration creates a local hook that runs the following command:

```bash
npx ultracite fix
```

This command:
- Runs Biome's linter and formatter on your codebase
- Automatically fixes formatting issues where possible
- Ensures all staged files meet your project's code standards
- Prevents commits that would introduce formatting inconsistencies

## Automatic Setup

During the initialization process (`ultracite init`), if you select the pre-commit option, Ultracite:

1. **Creates Config File**: Sets up the `.pre-commit-config.yaml` file with the Ultracite hook
2. **Handles Existing Setups**: If you already have pre-commit configured, it adds the Ultracite hook to your existing configuration rather than overwriting it

## Generated Configuration

Ultracite generates the following `.pre-commit-config.yaml`:

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
```

### Configuration Explained

- **repo: local** - Uses a locally defined hook rather than fetching from a remote repository
- **id: ultracite** - Unique identifier for the hook
- **name: ultracite** - Display name shown when the hook runs
- **entry** - The command to execute (uses npx to run Ultracite)
- **language: system** - Uses the system's installed tools
- **types_or** - File types that trigger the hook
- **pass_filenames: false** - Runs once for all files rather than per-file

## Prerequisites

Before using the pre-commit integration, you'll need:

1. **Python installed** - pre-commit is a Python package
2. **pre-commit installed** - Install globally or in a virtual environment:
   ```bash
   pip install pre-commit
   # or
   pipx install pre-commit
   ```
3. **Initialize hooks** - After Ultracite creates the config, run:
   ```bash
   pre-commit install
   ```

## Benefits

### Consistent Code Style
Every commit automatically follows your project's formatting standards, eliminating style debates and inconsistencies.

### Automated Quality Control
Catch formatting issues before they enter your repository, maintaining clean commit history.

### Team Collaboration
All team members automatically follow the same formatting standards without manual intervention.

### CI/CD Optimization
Reduce CI/CD pipeline failures due to formatting issues, as code is pre-formatted locally.

### Multi-Language Support
If your project uses multiple languages, pre-commit can manage hooks for all of them in one configuration file.

## Workflow Integration

With pre-commit integration enabled, your typical Git workflow becomes:

1. **Make changes** to your code files
2. **Stage changes** with `git add`
3. **Commit changes** with `git commit`
4. **Pre-commit hook runs** automatically, formatting staged files
5. **Commit proceeds** with properly formatted code

If the formatter makes changes, you'll need to stage and commit those changes as well.

## Customization

While Ultracite sets up sensible defaults, you can customize the behavior:

- Add additional hooks from the [pre-commit hooks repository](https://pre-commit.com/hooks.html)
- Configure Biome settings to adjust formatting rules
- Modify the `types_or` filter to include/exclude file types
- Add `exclude` patterns to skip certain files

### Example Extended Configuration

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
        exclude: ^(vendor/|dist/)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
```

## Troubleshooting

### Hook Not Running
If the pre-commit hook isn't executing:
- Ensure pre-commit is installed: `pre-commit --version`
- Run `pre-commit install` to set up the Git hooks
- Check that `.pre-commit-config.yaml` exists in your project root

### Node.js Not Found
If you get errors about npx not being found:
- Ensure Node.js is in your PATH
- Consider using a `.nvmrc` or `.node-version` file for version management

### Bypassing Hooks
In rare cases where you need to skip the pre-commit hook:
```bash
git commit --no-verify
# or
git commit -n
```

Use this sparingly, as it bypasses the automated formatting that keeps your codebase consistent.

### Running Hooks Manually
To run hooks manually on all files:
```bash
pre-commit run --all-files
```

To run just the Ultracite hook:
```bash
pre-commit run ultracite --all-files
```
