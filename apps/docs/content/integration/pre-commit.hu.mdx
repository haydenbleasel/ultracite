---
title: pre-commit
description: Az Ultracite automatikus futtatása a stagelt Git-fájlokon a pre-commit használatával
---

Ultracite zökkenőmentes integrációt biztosít a [pre-commit](https://pre-commit.com/) rendszerrel, egy népszerű, Python-alapú keretrendszerrel a Git hookok kezeléséhez. Ez az integráció automatikusan beállítja a pre-commit hookokat, hogy minden commit előtt biztosítsa a kód megfelelő formázását.

## Mi az a pre-commit?

A pre-commit egy keretrendszer többnyelvű pre-commit hookok kezelésére és karbantartására. Széles körben használják a Python ökoszisztémában, de bármilyen nyelvhez támogat hookokat. A pre-commit egy `.pre-commit-config.yaml` fájlt használ annak meghatározására, hogy mely hookok fussanak és mikor.

## Hogyan használja az Ultracite a pre-commitet

Amikor inicializálod az Ultracite-et a projektedben, automatikusan konfigurálhatja a pre-commitet úgy, hogy minden commit előtt futtassa a kódformázást. Ez biztosítja, hogy:

- Minden commitált kód egységes formázási szabványokat kövessen
- A kódminőségi ellenőrzések automatikusan érvényesüljenek
- A csapattagoknak ne kelljen manuálisan emlékezniük a kód formázására
- A tárolód tiszta, egységes kódstílust tartson fenn

## A pre-commit hook viselkedése

Az Ultracite pre-commit integrációja egy helyi hookot hoz létre, amely a következő parancsot futtatja:

```bash
npx ultracite fix
```

Ez a parancs:
- Futtatja Biome lintert és formázót a kódon
- Automatikusan javítja a formázási hibákat, ahol lehetséges
- Biztosítja, hogy minden stagelt fájl megfeleljen a projekt kód szabványainak
- Megakadályozza a commitokat, amelyek formázási inkonzisztenciát vezetnének be

## Automatikus beállítás

A inicializálási folyamat során (`ultracite init`), ha kiválasztod a pre-commit opciót, az Ultracite:

1. **Creates Config File**: Létrehozza a `.pre-commit-config.yaml` fájlt az Ultracite hookkal
2. **Handles Existing Setups**: Ha már be van állítva a pre-commit, hozzáadja az Ultracite hookot a meglévő konfigurációhoz a felülírás helyett

## Generált konfiguráció

Az Ultracite a következő `.pre-commit-config.yaml`-t generálja:

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
```

### Konfiguráció magyarázata

- **repo: local** - Helyileg definiált hookot használ, a távoli tárolóból való letöltés helyett
- **id: ultracite** - A hook egyedi azonosítója
- **name: ultracite** - A megjelenő név, amikor a hook fut
- **entry** - A végrehajtandó parancs (npx-et használ az Ultracite futtatásához)
- **language: system** - A rendszerre telepített eszközöket használja
- **types_or** - Azok a fájltípusok, amelyek kiváltják a hookot
- **pass_filenames: false** - Egyszer fut a fájlok egészére, nem fájlonként

## Előfeltételek

A pre-commit integráció használata előtt szükséged lesz:

1. **Python telepítve** - a pre-commit egy Python csomag
2. **pre-commit telepítve** - Telepítsd globálisan vagy virtuális környezetbe:
   ```bash
   pip install pre-commit
   # or
   pipx install pre-commit
   ```
3. **Initialize hooks** - Miután az Ultracite létrehozta a konfigurációt, futtasd:
   ```bash
   pre-commit install
   ```

## Előnyök

### Egységes kódstílus
Minden commit automatikusan követi a projekt formázási szabványait, kiküszöbölve a stílusbéli vitákat és inkonzisztenciákat.

### Automatikus minőségellenőrzés
Elkapja a formázási problémákat, mielőtt bekerülnének a tárolóba, így tiszta commit történetet tart fenn.

### Csapatmunka
Minden csapattag automatikusan ugyanazokat a formázási szabványokat követi manuális beavatkozás nélkül.

### CI/CD optimalizálás
Csökkenti a CI/CD pipeline hibákat formázási problémák miatt, mivel a kód helyben előre formázva van.

### Többnyelvű támogatás
Ha a projekt több nyelvet használ, a pre-commit egy konfigurációs fájlban kezelheti mindegyik hookját.

## Munkafolyamat integráció

A pre-commit integráció engedélyezése mellett a tipikus Git munkafolyamatod a következő lesz:

1. **Változtatások végrehajtása** a kód fájljaidon
2. **Változtatások stagelése** `git add`-del
3. **Commit készítése** `git commit`-tel
4. **A pre-commit hook automatikusan lefut**, formázva a stagelt fájlokat
5. **A commit folytatódik** a megfelelően formázott kóddal

Ha a formázó változtatásokat hajt végre, akkor ezeket újra stagelni és commitolni kell.

## Testreszabás

Bár az Ultracite ésszerű alapbeállításokat állít be, testre szabhatod a viselkedést:

- Adj hozzá további hookokat a [pre-commit hookok tárolójából](https://pre-commit.com/hooks.html)
- Konfiguráld a Biome beállításokat a formázási szabályok módosításához
- Módosítsd a `types_or` szűrőt fájltípusok hozzáadásához/eltávolításához
- Adj `exclude` mintákat bizonyos fájlok kihagyásához

### Példa kiterjesztett konfiguráció

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
        exclude: ^(vendor/|dist/)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
```

## Hibaelhárítás

### Hook nem fut
Ha a pre-commit hook nem fut:
- Győződj meg róla, hogy a pre-commit telepítve van: `pre-commit --version`
- Futtasd a `pre-commit install` parancsot a Git hookok beállításához
- Ellenőrizd, hogy a `.pre-commit-config.yaml` létezik-e a projekt gyökérkönyvtárában

### Node.js nem található
Ha olyan hibát kapsz, hogy az npx nem található:
- Győződj meg róla, hogy a Node.js benne van a PATH-ban
- Fontold meg `.nvmrc` vagy `.node-version` fájl használatát a verziókezeléshez

### Hookok kikerülése
Ritka esetekben, amikor át kell ugrani a pre-commit hookot:
```bash
git commit --no-verify
# or
git commit -n
```

Használd ezt takarékosan, mivel ezzel megkerülöd az automatikus formázást, ami a kódbázis konzisztenciáját biztosítja.

### Hookok kézi futtatása
A hookok kézi futtatásához az összes fájlon:
```bash
pre-commit run --all-files
```

Csak az Ultracite hook futtatásához:
```bash
pre-commit run ultracite --all-files
```