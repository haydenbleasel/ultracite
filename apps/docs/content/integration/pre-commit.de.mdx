---
title: pre-commit
description: Automatisch Ultracite auf Ihren zum Commit vorgemerkten Git-Dateien mit pre-commit ausführen
---

Ultracite bietet nahtlose Integration mit [pre-commit](https://pre-commit.com/), einem weit verbreiteten, auf Python basierenden Framework zur Verwaltung von Git-Hooks. Diese Integration richtet automatisch pre-commit-Hooks ein, die sicherstellen, dass Ihr Code vor jedem Commit korrekt formatiert ist.

## Was ist pre-commit?

pre-commit ist ein Framework zur Verwaltung und Pflege von mehrsprachigen pre-commit-Hooks. Es wird häufig im Python-Ökosystem verwendet, unterstützt aber Hooks für jede Sprache. pre-commit verwendet eine `.pre-commit-config.yaml`-Datei, um zu definieren, welche Hooks ausgeführt werden und wann.

## Wie Ultracite pre-commit verwendet

Wenn Sie Ultracite in Ihrem Projekt initialisieren, kann es pre-commit automatisch so konfigurieren, dass die Codeformatierung vor jedem Commit ausgeführt wird. Das stellt sicher, dass:

- Alle committeten Dateien konsistenten Formatierungsstandards folgen
- Code-Qualitätsprüfungen automatisch durchgesetzt werden
- Teammitglieder sich nicht daran erinnern müssen, Code manuell zu formatieren
- Ihr Repository einen sauberen, konsistenten Code-Stil beibehält

## Verhalten des pre-commit-Hooks

Die pre-commit-Integration von Ultracite erstellt einen lokalen Hook, der den folgenden Befehl ausführt:

```bash
npx ultracite fix
```

Dieser Befehl:
- Führt den Linter und Formatter von Biome auf Ihrem Codebestand aus
- Behebt Formatierungsprobleme automatisch, wo möglich
- Stellt sicher, dass alle gestagten Dateien den Code-Standards Ihres Projekts entsprechen
- Verhindert Commits, die Formatierungsinkonsistenzen einführen würden

## Automatische Einrichtung

Während des Initialisierungsprozesses (`ultracite init`), wenn Sie die pre-commit-Option auswählen, macht Ultracite Folgendes:

1. **Erstellt Konfigurationsdatei**: Legt die `.pre-commit-config.yaml`-Datei mit dem Ultracite-Hook an
2. **Berücksichtigt vorhandene Konfigurationen**: Wenn Sie pre-commit bereits konfiguriert haben, fügt es den Ultracite-Hook zur bestehenden Konfiguration hinzu, anstatt sie zu überschreiben

## Generierte Konfiguration

Ultracite erzeugt die folgende `.pre-commit-config.yaml`:

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
```

### Konfiguration erklärt

- **repo: local** - Verwendet einen lokal definierten Hook, anstatt ihn aus einem entfernten Repository zu beziehen
- **id: ultracite** - Eindeutiger Bezeichner für den Hook
- **name: ultracite** - Anzeigename, der beim Ausführen des Hooks angezeigt wird
- **entry** - Der auszuführende Befehl (verwendet npx, um Ultracite zu starten)
- **language: system** - Verwendet die auf dem System installierten Werkzeuge
- **types_or** - Dateitypen, die den Hook auslösen
- **pass_filenames: false** - Führt einmal für alle Dateien aus, statt Datei für Datei

## Voraussetzungen

Bevor Sie die pre-commit-Integration verwenden, benötigen Sie:

1. **Python installiert** - pre-commit ist ein Python-Paket
2. **pre-commit installiert** - Installieren Sie es global oder in einer virtuellen Umgebung:
   ```bash
   pip install pre-commit
   # or
   pipx install pre-commit
   ```
3. **Hooks initialisieren** - Nachdem Ultracite die Konfiguration erstellt hat, führen Sie aus:
   ```bash
   pre-commit install
   ```

## Vorteile

### Konsistenter Code-Stil
Jeder Commit folgt automatisch den Formatierungsstandards Ihres Projekts, wodurch Stilfragen und Inkonsistenzen entfallen.

### Automatisierte Qualitätskontrolle
Erfassen Sie Formatierungsprobleme, bevor sie in Ihr Repository gelangen, und behalten Sie eine saubere Commit-Historie bei.

### Teamzusammenarbeit
Alle Teammitglieder halten automatisch dieselben Formatierungsstandards ein, ohne manuellen Aufwand.

### CI/CD-Optimierung
Reduzieren Sie CI/CD-Pipeline-Fehlschläge aufgrund von Formatierungsproblemen, da der Code lokal vorformatiert wird.

### Mehrsprachige Unterstützung
Wenn Ihr Projekt mehrere Sprachen verwendet, kann pre-commit Hooks für alle in einer Konfigurationsdatei verwalten.

## Integration in den Workflow

Mit aktivierter pre-commit-Integration sieht Ihr typischer Git-Workflow wie folgt aus:

1. **Änderungen vornehmen** an Ihren Code-Dateien
2. **Änderungen stagen** mit `git add`
3. **Änderungen committen** mit `git commit`
4. **pre-commit-Hook läuft** automatisch und formatiert die gestagten Dateien
5. **Commit wird fortgesetzt** mit korrekt formatiertem Code

Wenn der Formatter Änderungen vornimmt, müssen Sie diese Änderungen erneut stagen und committen.

## Anpassung

Während Ultracite sinnvolle Voreinstellungen setzt, können Sie das Verhalten anpassen:

- Fügen Sie zusätzliche Hooks aus dem [Repository der pre-commit-Hooks](https://pre-commit.com/hooks.html) hinzu
- Konfigurieren Sie Biome-Einstellungen, um Formatierungsregeln anzupassen
- Ändern Sie den `types_or`-Filter, um Dateitypen ein- oder auszuschließen
- Fügen Sie `exclude`-Muster hinzu, um bestimmte Dateien zu überspringen

### Beispiel für erweiterte Konfiguration

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
        exclude: ^(vendor/|dist/)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
```

## Fehlerbehebung

### Hook wird nicht ausgeführt
Wenn der pre-commit-Hook nicht ausgeführt wird:
- Stellen Sie sicher, dass pre-commit installiert ist: `pre-commit --version`
- Führen Sie `pre-commit install` aus, um die Git-Hooks einzurichten
- Prüfen Sie, ob `.pre-commit-config.yaml` im Projektstamm vorhanden ist

### Node.js nicht gefunden
Wenn Sie Fehler erhalten, dass npx nicht gefunden wurde:
- Stellen Sie sicher, dass Node.js in Ihrem PATH ist
- Erwägen Sie die Verwendung einer `.nvmrc`- oder `.node-version`-Datei für das Versionsmanagement

### Hooks umgehen
In seltenen Fällen, in denen Sie den pre-commit-Hook überspringen müssen:
```bash
git commit --no-verify
# or
git commit -n
```

Verwenden Sie dies sparsam, da dadurch die automatisierte Formatierung umgangen wird, die Ihre Codebasis konsistent hält.

### Hooks manuell ausführen
Um Hooks manuell für alle Dateien auszuführen:
```bash
pre-commit run --all-files
```

Um nur den Ultracite-Hook auszuführen:
```bash
pre-commit run ultracite --all-files
```