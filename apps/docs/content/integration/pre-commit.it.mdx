---
title: pre-commit
description: Esegui automaticamente Ultracite sui file staged di Git usando pre-commit
---

Ultracite offre un'integrazione fluida con [pre-commit](https://pre-commit.com/), un popolare framework basato su Python per la gestione dei Git hook. Questa integrazione configura automaticamente i hook di pre-commit per assicurarsi che il tuo codice sia formattato correttamente prima di ogni commit.

## Cos'è pre-commit?

pre-commit è un framework per gestire e mantenere hook di pre-commit multi-lingua. È ampiamente usato nell'ecosistema Python ma supporta hook per qualsiasi linguaggio. pre-commit usa un file `.pre-commit-config.yaml` per definire quali hook eseguire e quando.

## Come Ultracite usa pre-commit

Quando inizializzi Ultracite nel tuo progetto, può configurare automaticamente pre-commit per eseguire la formattazione del codice prima di ogni commit. Questo garantisce che:

- Tutto il codice commitato segua standard di formattazione coerenti
- I controlli di qualità del codice vengano applicati automaticamente
- I membri del team non debbano ricordarsi di formattare il codice manualmente
- Il tuo repository mantenga uno stile di codice pulito e coerente

## Comportamento dell'hook di pre-commit

L'integrazione di Ultracite con pre-commit crea un hook locale che esegue il seguente comando:

```bash
npx ultracite fix
```

Questo comando:
- Esegue il linter e il formatter di Biome sul tuo codebase
- Corregge automaticamente i problemi di formattazione dove possibile
- Assicura che tutti i file staged rispettino gli standard di codice del tuo progetto
- Impedisce commit che introdurrebbero incoerenze di formattazione

## Configurazione automatica

Durante il processo di inizializzazione (`ultracite init`), se selezioni l'opzione pre-commit, Ultracite:

1. **Creates Config File**: Imposta il file `.pre-commit-config.yaml` con l'hook di Ultracite
2. **Handles Existing Setups**: Se hai già pre-commit configurato, aggiunge l'hook di Ultracite alla tua configurazione esistente invece di sovrascriverla

## Configurazione generata

Ultracite genera il seguente `.pre-commit-config.yaml`:

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
```

### Spiegazione della configurazione

- **repo: local** - Usa un hook definito localmente invece di recuperarlo da un repository remoto
- **id: ultracite** - Identificatore univoco per l'hook
- **name: ultracite** - Nome visualizzato quando l'hook viene eseguito
- **entry** - Il comando da eseguire (usa npx per lanciare Ultracite)
- **language: system** - Usa gli strumenti installati sul sistema
- **types_or** - Tipi di file che attivano l'hook
- **pass_filenames: false** - Esegue una volta per tutti i file invece che per singolo file

## Prerequisiti

Prima di usare l'integrazione con pre-commit, avrai bisogno di:

1. **Python installato** - pre-commit è un pacchetto Python
2. **pre-commit installato** - Installa globalmente o in un ambiente virtuale:
   ```bash
   pip install pre-commit
   # or
   pipx install pre-commit
   ```
3. **Initialize hooks** - Dopo che Ultracite crea la configurazione, esegui:
   ```bash
   pre-commit install
   ```

## Vantaggi

### Stile di codice coerente
Ogni commit segue automaticamente gli standard di formattazione del tuo progetto, eliminando discussioni sullo stile e incoerenze.

### Controllo qualità automatizzato
Individua i problemi di formattazione prima che entrino nel repository, mantenendo una cronologia dei commit pulita.

### Collaborazione del team
Tutti i membri del team seguono automaticamente gli stessi standard di formattazione senza intervento manuale.

### Ottimizzazione CI/CD
Riduci i fallimenti nelle pipeline CI/CD dovuti a problemi di formattazione, poiché il codice viene pre-formattato localmente.

### Supporto multi-lingua
Se il tuo progetto utilizza più linguaggi, pre-commit può gestire hook per tutti in un unico file di configurazione.

## Integrazione nel workflow

Con l'integrazione pre-commit abilitata, il tuo tipico workflow Git diventa:

1. **Apporta modifiche** ai file di codice
2. **Stage delle modifiche** con `git add`
3. **Commit delle modifiche** con `git commit`
4. **L'hook di pre-commit viene eseguito** automaticamente, formattando i file staged
5. **Il commit procede** con il codice correttamente formattato

Se il formatter apporta modifiche, dovrai effettuare nuovamente lo stage e il commit di quelle modifiche.

## Personalizzazione

Sebbene Ultracite imposti dei valori predefiniti sensati, puoi personalizzare il comportamento:

- Aggiungi hook aggiuntivi dal [repository degli hook di pre-commit](https://pre-commit.com/hooks.html)
- Configura le impostazioni di Biome per adattare le regole di formattazione
- Modifica il filtro `types_or` per includere/escludere tipi di file
- Aggiungi pattern `exclude` per saltare determinati file

### Esempio di configurazione estesa

```yaml
repos:
  - repo: local
    hooks:
      - id: ultracite
        name: ultracite
        entry: npx ultracite fix
        language: system
        types_or: [javascript, jsx, ts, tsx, json, css]
        pass_filenames: false
        exclude: ^(vendor/|dist/)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
```

## Risoluzione dei problemi

### Hook non in esecuzione
Se l'hook di pre-commit non viene eseguito:
- Assicurati che pre-commit sia installato: `pre-commit --version`
- Esegui `pre-commit install` per configurare i Git hook
- Verifica che `.pre-commit-config.yaml` esista nella root del progetto

### Node.js non trovato
Se ricevi errori su npx non trovata:
- Assicurati che Node.js sia nel tuo PATH
- Considera l'uso di un file `.nvmrc` o `.node-version` per la gestione delle versioni

### Bypassare gli hook
In rari casi in cui è necessario saltare l'hook di pre-commit:
```bash
git commit --no-verify
# or
git commit -n
```

Usa questa opzione con parsimonia, poiché bypassa la formattazione automatica che mantiene coerente il tuo codebase.

### Esecuzione manuale degli hook
Per eseguire gli hook manualmente su tutti i file:
```bash
pre-commit run --all-files
```

Per eseguire solo l'hook Ultracite:
```bash
pre-commit run ultracite --all-files
```