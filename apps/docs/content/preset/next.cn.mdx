---
title: Next.js
description: 适用于 Next.js 的 Ultracite 特定 lint 规则。
---

该 Next.js 配置包含针对图像优化、文档结构和 App Router 模式的 Next.js 特定 lint 规则。

## 安装

将 Next.js 配置添加到你的 `biome.jsonc`：

```jsonc title="biome.jsonc"
{
  "extends": ["ultracite/core", "ultracite/next"]
}
```

## 概览

此配置添加了针对 Next.js 开发的特定规则：

- **图像优化**: 强制使用 Next.js 的 Image 组件
- **文档结构**: 防止不当使用 Next.js 的特殊组件
- **配置文件**: 对 `next.config.*` 文件进行特殊处理

## Next.js 特定规则

### 性能

| Rule | Setting | Description |
|------|---------|-------------|
| `noImgElement` | `error` | 禁止使用 `<img>` HTML 元素。请改用 Next.js 的 `<Image>` 组件以实现自动图像优化。 |

### 样式

| Rule | Setting | Description |
|------|---------|-------------|
| `noHeadElement` | `error` | 禁止使用 `<head>` HTML 元素。请改用 Next.js 的 `next/head` 或 App Router 的 metadata API。 |

### 可疑

| Rule | Setting | Description |
|------|---------|-------------|
| `noDocumentImportInPage` | `error` | 阻止在页面文件中导入 `next/document`。`_document.tsx` 应仅存在于 `pages/_document.tsx`。 |
| `noHeadImportInDocument` | `error` | 阻止在 `_document.tsx` 中导入 `next/head`。请改为使用来自 `next/document` 的 `<Head>`。 |

## 配置文件覆盖

Next.js 预设对配置文件和 App Router 组件进行了特殊处理：

### Next.js 配置文件

```jsonc
{
  "overrides": [
    {
      "includes": ["next.config.*"],
      "linter": {
        "rules": {
          "suspicious": {
            "useAwait": "off"
          }
        }
      }
    }
  ]
}
```

这允许某些 Next.js 配置模式（可能通常无法通过 lint 规则）存在。

### App Router 页面和布局

```jsonc
{
  "overrides": [
    {
      "includes": ["**/page.{ts,tsx,js,jsx}", "**/layout.{ts,tsx,js,jsx}"],
      "linter": {
        "rules": {
          "suspicious": {
            "useAwait": "off"
          }
        }
      }
    }
  ]
}
```

App Router 的页面和布局组件允许为 async 而不需要使用 `await`，因为 Next.js 对这些在服务器端渲染和数据获取方面有特殊处理。